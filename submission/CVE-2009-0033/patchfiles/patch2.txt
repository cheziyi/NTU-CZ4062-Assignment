--- tomcat/tc6.0.x/trunk/java/org/apache/jk/common/ChannelSocket.java	2009/02/10 09:37:11	742914
+++ tomcat/tc6.0.x/trunk/java/org/apache/jk/common/ChannelSocket.java	2009/02/10 09:40:19	742915
@@ -45,6 +45,7 @@
 import org.apache.coyote.Request;
 import org.apache.coyote.RequestGroupInfo;
 import org.apache.coyote.RequestInfo;
+import org.apache.coyote.ActionCode;
 import org.apache.tomcat.util.modeler.Registry;
 import org.apache.tomcat.util.threads.ThreadPool;
 import org.apache.tomcat.util.threads.ThreadPoolRunnable;
@@ -697,6 +698,7 @@
                 status= this.invoke( recv, ep );
                 if( status!= JkHandler.OK ) {
                     log.warn("processCallbacks status " + status );
+                    ep.action(ActionCode.ACTION_CLOSE, ep.getRequest().getResponse());
                     break;
                 }
             }
