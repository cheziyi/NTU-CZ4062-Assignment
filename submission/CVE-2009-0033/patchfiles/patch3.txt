--- tomcat/tc6.0.x/trunk/java/org/apache/jk/common/HandlerRequest.java	2009/02/10 09:37:11	742914
+++ tomcat/tc6.0.x/trunk/java/org/apache/jk/common/HandlerRequest.java	2009/02/10 09:40:19	742915
@@ -265,8 +265,16 @@
                                  ((Request)ep.getRequest()).unparsedURI());
                 }
             } catch( Exception ex ) {
+                /* If we are here it is because we have a bad header or something like that */
                 log.error( "Error decoding request ", ex );
                 msg.dump( "Incomming message");
+                Response res=ep.getRequest().getResponse();
+                if ( res==null ) {
+                    res=new Response();
+                    ep.getRequest().setResponse(res);
+                }
+                res.setMessage("Bad Request");
+                res.setStatus(400);
                 return ERROR;
             }
 
